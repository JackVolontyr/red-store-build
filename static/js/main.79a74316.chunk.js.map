{"version":3,"sources":["utils/index.js","reducers/upBooksState.added.js","reducers/upBooksState.filtered.js","reducers/upBooksState.js","reducers/upCartState.js","reducers/index.js","store.js","components/ErrorView/index.js","components/ErrorView/ErrorView.js","components/ErrorCatcher/index.js","components/ErrorCatcher/ErrorCatcher.js","actions/index.js","components/CartItem/CartItem.js","components/Cart/index.js","components/Cart/Cart.js","containers/CartContainer/CartContainer.js","containers/CartContainer/index.js","components/Pages/CartPage.js","components/BookItem/BookItem.js","components/BookItem/index.js","components/BookList/BookList.js","components/BookList/index.js","components/Spinner/index.js","components/Spinner/Spinner.js","components/Hoc/composeHoc.js","components/BookstoreServiceContext/BookstoreServiceContext.js","components/Hoc/connectHoc.js","containers/BookListContainer/BookListContainer.js","containers/BookListContainer/index.js","components/Pages/HomePage.js","components/Header/index.js","components/Header/Header.js","components/App/index.js","components/App/App.js","services/BookstoreService.js","index.js"],"names":["optionsOf","array","value","index","element","key","isIn","some","elem","i","isSub","string","sub","indexOf","sortMethods","toText","toString","split","join","toLowerCase","toKey","toParameter","searchby","request","book","title","author","map","item","arrayToLowerCase","trim","a","instock","quantity","byrating","tohigh","b","tolow","byprice","upBooks","books","slice","toggleAsAdded","booksState","id","cache","indexInCache","bookInCache","newBook","isInCart","newBookInCache","isInStock","filter","setFilter_button","filters","toggleValue","switchValue","IN_STOCK","forInStock","isByRating","BY_RATING","BY_PRICE","forRating","forPrice","setFilter","isNotSearch","specialCharacter","length","SEARCH_BY","setFilter_search","isSearchBy","type","filterBooks","Object","entries","reduce","acc","curr","param","ms","argument","prepareSearchParam","isSwitch","sort","filterBy","filtered","changed","values","find","touchFilters","INIT_FILTERS","INIT_BOOKS_STATE","isLoading","error","upBooksState","state","action","bookId","newBooks","unsetAllAsAdded","upCart_items","items","upCart_itemCount","getNewCount","newCount","count","total","price","newCartItems","actionType","findBook","currency","ifNotOne","ifNotMax","upCart","counteraction","cartState","cartItems","newItems","upCartState","initialCartState","reducer","store","createStore","applyMiddleware","thunk","dispatch","console","log","timeout","setTimeout","ErrorView","className","ErrorCatcher","isHasError","this","setState","props","children","Component","toggleFilter","searchBy","fetchBooks","bookstoreService","getBooks","then","data","catch","errorBooks","addBookToCart","setAdded","addToCart","getBooksFromCache","CartItem","cartItem","decrease","increase","remove","scope","onClick","Cart","clearCart","mapDispatchToProps","unsetAdded","removeItem","CartContainer","connect","CartPage","Rating","rating","BookItem","cover","src","alt","disabled","FilterButton","isSet","text","BookList","onChange","e","target","placeholder","Spinner","composeHoc","funcs","comp","reduceRight","prev","f","ContextBookstoreService","createContext","ProviderBookstoreService","Provider","ConsumerBookstoreService","Consumer","connectHoc","params","View","BookListContainer","bindActionCreators","HomePage","Header","numberItems","to","App","role","path","component","exact","BookstoreService","_data","Promise","resolve","reject","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"iXAQMA,EAAY,SAACC,EAAOC,GAAuB,IAC3CC,EAAOC,EADoBC,EAAe,uDAAT,KAG/BC,EAAOL,EAAMM,MAAK,SAACC,EAAMC,GAG7B,OAFAN,EAAQM,EACRL,EAAUI,EACHA,EAAKH,KAASH,KAQvB,OALKI,IACHH,GAAS,EACTC,EAAU,MAGL,CAAEE,OAAMH,QAAOC,YAKlBM,EAAQ,SAACC,EAAQC,GAAT,OAAiBD,EAAOE,QAAQD,IAAQ,GAEhDE,EAAc,CAClBC,OAAQ,SAAAb,GAAK,OAAIA,EAAMc,WAAWC,MAAM,KAAKC,KAAK,KAAKC,eACvDC,MAAO,SAAAlB,GAAK,OAAIA,EAAMc,WAAWC,MAAM,KAAKC,KAAK,IAAIC,eACrDE,YAAa,SAAAnB,GAAK,OAAIA,EAAMc,WAAWC,MAAM,KAAK,GAAGE,eAErDG,SAAU,CACR,KAAQ,SAAAC,GAAO,OAAI,SAAAC,GACjB,IAAMC,EAAkBD,EAAlBC,MAAOC,EAAWF,EAAXE,OADY,EATN,sCAAIzB,EAAJ,yBAAIA,EAAJ,uBAAcA,EAAM0B,KAAI,SAAAC,GAAI,OAAIA,EAAKT,iBAW7BU,CAAiBJ,EAAOC,EAAQH,EAAQO,QAF1C,mBAIzB,GAFCL,EAFwB,KAEjBC,EAFiB,KAETH,EAFS,KAIrBb,EAAMe,EAAOF,IAAYb,EAAMgB,EAAQH,GACzC,OAAOC,IAIX,MAAS,kBAAM,SAAAO,GAAC,OAAIA,KAEtBC,QAAS,CACP,KAAQ,kBAAM,SAAAD,GAAC,OAAIA,EAAEE,SAAW,IAChC,MAAS,kBAAM,SAAAF,GAAC,OAAIA,KAEtBG,SAAU,CACRC,OAAQ,SAAC9B,GAAD,OAAS,SAAC0B,EAAGK,GAAJ,OAAUL,EAAE1B,GAAO+B,EAAE/B,KACtCgC,MAAO,SAAChC,GAAD,OAAS,SAAC0B,EAAGK,GAAJ,OAAUA,EAAE/B,GAAO0B,EAAE1B,MAEvCiC,QAAS,CACPH,OAAQ,SAAC9B,GAAD,OAAS,SAAC0B,EAAGK,GAAJ,OAAUL,EAAE1B,GAAO+B,EAAE/B,KACtCgC,MAAO,SAAChC,GAAD,OAAS,SAAC0B,EAAGK,GAAJ,OAAUA,EAAE/B,GAAO0B,EAAE1B,OCtDnCkC,EAAU,SAACC,EAAOrC,EAAOqB,GAAf,4BACXgB,EAAMC,MAAM,EAAGtC,IADJ,gBACiBqB,IADjB,YAC4BgB,EAAMC,MAAMtC,EAAQ,MAU1DuC,EAAgB,SAACC,EAAYC,EAAI1C,GACrC,IAAMsC,EAAiBG,EAAjBH,MAAOK,EAAUF,EAAVE,MAEb,EAAiC7C,EAAUwC,EAAOI,GAA1CzC,EAAR,EAAQA,MAAgBqB,EAAxB,EAAepB,QACf,EAAsDJ,EAAU6C,EAAOD,GAAxDE,EAAf,EAAQ3C,MAA8B4C,EAAtC,EAA6B3C,QAEvB4C,EAAO,2BAAQxB,GAAR,IAAcyB,SAAU/C,IAC/BgD,EAAc,2BAAQH,GAAR,IAAqBE,SAAU/C,IAGnD,OAFAsC,EAAQD,EAAQC,EAAOrC,EAAO6C,GAC9BH,EAAQN,EAAQM,EAAOC,EAAcI,GAC9B,2BAAKP,GAAZ,IAAwBH,QAAOK,WCpB3BM,EAAY,SAAAC,GAAM,MFFP,aEEWA,GAUtBC,EAAmB,SAACV,EAAYS,GACpC,IAAME,EAAYX,EAAZW,QACFpD,EAAQoD,EAAQF,GAQpB,OANAlD,EAAQiD,EAAUC,GAXA,SAAAlD,GAAK,OAAIA,EAWCqD,CAAYrD,GAVtB,SAAAA,GAAK,OAAKA,EFHf,WEG0BA,GFJzB,UACD,SEaoCsD,CAAYtD,GAE7DoD,EAAUH,EAAUC,GAVH,SAACE,EAASpD,GAAV,mBAAC,eAAyBoD,GAA1B,IAAmCG,SAAUvD,IAW5DwD,CAAWJ,EAASpD,GAhBL,SAAAkD,GAAM,MFJP,cEIWA,EAiBzBO,CAAWP,GAXG,SAACE,EAASpD,GAAV,mBAAC,eAAyBoD,GAA1B,IAAmCM,UAAW1D,EAAO2D,UAAU,IAWxDC,CAAUR,EAASpD,GAV3B,SAACoD,EAASpD,GAAV,mBAAC,eAAyBoD,GAA1B,IAAmCM,WAAW,EAAOC,SAAU3D,IAU3B6D,CAAST,EAASpD,GAE9D,2BAAKyC,GAAZ,IAAwBW,aAapBU,EAAY,SAACrB,EAAYS,EAAQ7B,GAIrC,OAHAoB,EAnCkB,SAAApB,GAAO,OAAgB,IAAZA,EAmChB0C,CAAY1C,GACvB8B,EAAiBV,EAAYS,GAVR,SAACT,EAAYpB,GACpC,IAHcZ,EAGR2C,EAAYX,EAAZW,QACAY,EAJgD,OAAxCvD,EAImBY,GAJFZ,EAAOwD,OAAS,GAIH,IAAM,GAGlD,OAFA5C,EAAUA,EAAQO,OAASoC,EAC3BZ,EAAO,2BAAQA,GAAR,IAAiBM,WAAW,EAAOC,UAAU,EAAOO,UAAW7C,IAC/D,2BAAKoB,GAAZ,IAAwBW,YAMtBe,CAAiB1B,EAAYpB,GACxB,eAAKoB,IAKR2B,EAAa,SAAAC,GAAI,MAAa,aAATA,GAuBrBC,EAAc,SAAA7B,GAClB,IAAME,EAAmBF,EAAnBE,MAAOS,EAAYX,EAAZW,QACTd,EAAQiC,OAAOC,QAAQpB,GAASqB,QAAO,SAACC,EAAKC,GAC/C,kBAAqBA,EAArB,GAAOxE,EAAP,KAAYH,EAAZ,KACA,OAASA,EAxBI,SAACD,EAAOsE,EAAMO,GAC7B,IAAMC,EAAKjE,EACHM,EAAuB2D,EAAvB3D,MAEJG,EAAUuD,EACVE,GAAW3D,EAHgB0D,EAAhB1D,aAGYkD,GAY3B,OAVAA,EAAOnD,EAAMmD,GACbO,EAAQR,EAAWC,GAZM,SAAAO,GAAK,MAAc,KAAVA,EAYPG,CAAmBH,GAAS1D,EAAM0D,GAG7D7E,EAbe,SAAAsE,GAAI,MAAa,aAATA,GAAgC,YAATA,EAatCW,CAASX,GACftE,EAAMkF,KAAKJ,EAAGR,GAAMO,GAAOE,IAC3BV,EAAWC,GACTtE,EAAMmD,OAAO2B,EAAGR,GAAMO,GAAOvD,IAC7BtB,EAAMmD,OAAO2B,EAAGR,GAAMO,GAAOE,IAE1B,YAAI/E,GAOQmF,CAASR,EAAKvE,EAAKH,GAA7B,YAA0C0E,KAChD/B,GACH,OAAO,YAAIL,IAeE6C,EANE,SAAC1C,EAAY2C,EAAS/D,GAGrC,OADAoB,EARmB,SAAAA,GACnB,IAAME,EAAmBF,EAAnBE,MAAOS,EAAYX,EAAZW,QACPd,EAAmBiC,OAAOc,OAAOjC,GApCNkC,MAAK,SAAA5D,GAAI,QAAMA,KAoCgB4C,EAAY7B,GAA9D,YAAyCE,GACvD,OAAO,2BAAKF,GAAZ,IAAwBH,UAKXiD,CADb9C,EAAaqB,EAAUrB,EAAY2C,EAAS/D,IAErC,eAAKoB,IClFR+C,EAAe,CAAEjC,UAAU,EAAOG,WAAW,EAAOC,UAAU,EAAOO,UAAW,IAChFuB,EAAmB,CACvB9C,MAAO,GACPL,MAAO,GACPoD,WAAW,EACXC,MAAO,KACPvC,QAAQ,eAAMoC,IAGVI,EAAe,SAACC,EAAOC,GAC3B,IAAKD,EAAO,OAAO,eAAKJ,GAGxB,IACEpB,EAKEyB,EALFzB,KACQ3B,EAINoD,EAJFC,OACA7C,EAGE4C,EAHF5C,OAAQ7B,EAGNyE,EAHMzE,QACR2E,EAEEF,EAFFE,SACAL,EACEG,EADFH,MAGMlD,EAAeoD,EAAfpD,WACAE,EAAUF,EAAVE,MAER,OAAQ0B,GACN,IAAK,sBAAuB,OAAO,2BAAK5B,GAAZ,IAAwBiD,WAAW,IAE/D,IAAK,sBAAuB,OAAO,2BAC9BjD,GADuB,IACXH,MAAM,YAAK0D,GAAWrD,MAAM,YAAKqD,GAAWN,WAAW,IAGxE,IAAK,sBAAuB,OAAO,2BAAKjD,GAAZ,IAAwBiD,WAAW,EAAOC,UACtE,IAAK,uBAAwB,OAAO,2BAAKlD,GAAZ,IAAwBH,MAAM,YAAKK,GAAQ+C,WAAW,EAAOtC,QAAQ,eAAMoC,KAExG,IAAK,gBAAiB,OAAOL,EAAS1C,EAAYS,GAAQ,GAE1D,IAAK,YAAa,OAAOiC,EAAS1C,EHnCpB,YGmC2CpB,GAEzD,IAAK,4BAA6B,OAAOmB,EAAcC,EAAYC,GAAI,GACvE,IAAK,8BAA+B,OAAOF,EAAcC,EAAYC,GAAI,GACzE,IAAK,mCAAoC,OFtCrB,SAAAD,GACtB,IAAMH,EAAiBG,EAAjBH,MAAOK,EAAUF,EAAVE,MAGb,OAFAL,EAAQA,EAAMb,KAAI,SAAAH,GAAI,kCAAUA,GAAV,IAAgByB,UAAU,OAChDJ,EAAQA,EAAMlB,KAAI,SAAAH,GAAI,kCAAUA,GAAV,IAAgByB,UAAU,OACzC,2BAAKN,GAAZ,IAAwBH,QAAOK,UEkCmBsD,CAAgBxD,GAEhE,QAAS,OAAOA,ICpCdyD,EAAe,SAACC,EAAOlG,GAAR,IAAeyB,EAAf,uDAAsB,KAAtB,OAA+BA,EAClD5B,EAAUqG,EAAOzE,EAAKgB,IAAItC,KAA1B,sBACM+F,EAAM5D,MAAM,EAAGtC,IADrB,CAC6ByB,GAD7B,YACsCyE,EAAM5D,MAAMtC,EAAQ,KAD1D,sBAGMkG,GAHN,CAGazE,IAJyC,sBAMlDyE,EAAM5D,MAAM,EAAGtC,IANmC,YAMxBkG,EAAM5D,MAAMtC,EAAQ,MAE9CmG,EAAmB,SAACD,EAAOzE,EAAMzB,EAAOoG,GAC5C,IAAMC,EAAWD,IACjB,OAAOH,EAAaC,EAAOlG,EAAR,YAAC,eAAmByB,GAApB,IAA0B6E,MAAOD,EAAUE,MAAOF,EAAW5E,EAAK+E,UAmBjFC,EAAe,SAACP,EAAOzD,EAAIJ,EAAOqE,GACtC,IAnCkB,EAmClB,EAA+C7G,EAAUqG,EAAOzD,GAApDK,EAAZ,EAAM3C,KAAyBsB,EAA/B,EAAsBxB,QAAeD,EAArC,EAAqCA,MAC/BqB,EArCS,SAACoB,EAAIJ,GAAL,OAAeA,EAAMgD,MAAK,SAAChE,GAAD,OAAUA,EAAKoB,KAAOA,KAqClDkE,CAASlE,EAAIJ,GAE1B,OADKS,IAAUrB,EArCiD,CAAEgB,IAAhD,EAqCepB,GArCboB,GAAkDnB,MAArD,EAAOA,MAAqDkF,MAA5D,EAAcA,MAAqDI,SAAnE,EAAqBA,SAAwD9E,SAA7E,EAA+BA,WAkBnC,SAACoE,EAAOzE,EAAMqB,EAAU9C,EAAO8B,EAAU4E,GACtD,IAAQJ,EAAU7E,EAAV6E,MAER,OAAQI,GACN,IAAK,MAAO,OAAOP,EAAiBD,EAAOzE,EAAMzB,GAAO,kBApB3C,SAACsG,GAAD,OAAWA,EAAQ,EAAIA,EAAQ,EAAIA,EAoBcO,CAASP,MACvE,IAAK,MAAO,OAAOH,EAAiBD,EAAOzE,EAAMzB,GAAO,kBApB3C,SAACsG,EAAOxE,GAAR,OAAqBwE,EAAQxE,EAAWwE,EAAQ,EAAIA,EAoBHQ,CAASR,EAAOxE,MAC9E,IAAK,MAAO,OAAOmE,EAAaC,EAAOlG,GAEvC,QAAS,OAAO8C,EAAWoD,EAAQC,EAAiBD,EAAOzE,EAAMzB,GAAO,kBAAM,MAYzE+G,CAAOb,EAAOzE,EAAMqB,EAAU9C,EAAOqB,EAAKS,SAAU4E,IAGvDM,EAAgB,SAACC,EAAWC,EAAWzE,EAAIJ,EAAOqE,GACtD,IAAMS,EAAWV,EAAaS,EAAWzE,EAAIJ,EAAOqE,GAC9CH,EAAiBY,EA9CO3C,QAAO,SAACC,EAAKC,GAAN,OAAeD,EAAMC,EAAK6B,QAAO,GA+CtE,OAAO,2BAAKU,GAAZ,IAAuBC,UAAWC,EAAUZ,WA0B/Ba,EAvBK,SAACxB,EAAOC,GAC1B,IAAMwB,EAAmB,CACvBH,UAAW,GACXN,SAAU,IACVL,MAAO,GAGT,IAAKX,EAAO,OAAOyB,EAEnB,IAAM5E,EAAKoD,EAAOC,OACVmB,EAAcrB,EAAdqB,UACaC,EAAuCtB,EAApDqB,UAAaC,UAA2B7E,EAAYuD,EAA1BpD,WAAcH,MAEhD,OAAQwD,EAAOzB,MACb,IAAK,mBAAoB,OAAO4C,EAAcC,EAAWC,EAAWzE,EAAIJ,GACxE,IAAK,qBAAsB,OAAO2E,EAAcC,EAAWC,EAAWzE,EAAIJ,EAAO,OACjF,IAAK,qBAAsB,OAAO2E,EAAcC,EAAWC,EAAWzE,EAAIJ,EAAO,OACjF,IAAK,mBAAoB,OAAO2E,EAAcC,EAAWC,EAAWzE,EAAIJ,EAAO,OAC/E,IAAK,4BAA6B,OAAOgF,EACzC,QAAS,OAAOJ,IC1DLK,EAVC,SAAC1B,EAAOC,GAItB,MAAO,CACLrD,WAAYmD,EAAaC,EAAOC,GAChCoB,UAAWG,EAAYxB,EAAOC,KCM5B0B,EAAQC,YAEZF,EAASG,YACPC,KAbqB,SAACH,GAAD,OAAW,SAACI,GAAD,OAAc,SAAC9B,GACjD,OAAuC8B,EAAjB,kBAAX9B,EAAqC,CAAEzB,KAAMyB,GACxCA,QAGI,SAAC0B,GAAD,OAAW,SAACI,GAAD,OAAc,SAAC9B,GAE9C,OADA+B,QAAQC,IAAIhC,EAAOzB,MACZuD,EAAS9B,SAYlB0B,EAAMI,SAAS,QAUf,IAA8BG,EAI9BP,EAAMI,UAJwBG,EAIM,IAJM,SAACH,GACzCI,YAAW,kBAAMJ,EAAS,CAAEvD,KAAM,qBAAqB0D,MAK1CP,Q,yECvCAS,G,MCEG,kBAAM,yBAAKC,UAAU,iBAAf,4BCFTC,E,4MCGbtC,MAAQ,CAAEuC,YAAY,G,uDACtB,WAAsBC,KAAKC,SAAS,CAAEF,YAAY,M,oBAElD,WACE,OAAIC,KAAKxC,MAAMuC,WACN,yBAAKF,UAAWG,KAAKE,MAAML,WAAW,kBAAC,EAAD,OAEtCG,KAAKE,MAAMC,a,GARkBC,a,OCEpCC,EAAe,SAAAxF,GAAM,MAAK,CAAEmB,KAAM,gBAAiBnB,WACnDyF,EAAW,SAAAtH,GAAO,MAAK,CAAEgD,KAAM,YAAahD,YAmB5CuH,EAAa,SAAAC,GAAgB,OAAI,kBAAM,SAAAjB,GAC3CA,EA1B6B,uBA2B7BiB,EAAiBC,WACdC,MAAK,SAACC,GAAD,OAAUpB,EA3Ba,CAAEvD,KAAM,sBAAuB2B,SA2BvBgD,OACpCC,OAAM,SAACtD,GAAD,OAAWiC,EA3BH,SAAAjC,GAAK,MAAK,CAAEtB,KAAM,sBAAuBsB,SA2B7BuD,CAAWvD,UAGpCwD,EAAgB,SAACpD,GAAD,OAAY,SAAA6B,GAChCA,EAzBe,SAAA7B,GAAM,MAAK,CAAE1B,KAAM,4BAA6B0B,UAyBtDqD,CAASrD,IAClB6B,EAvBgB,SAAA7B,GAAM,MAAK,CAAE1B,KAAM,mBAAoB0B,UAuB9CsD,CAAUtD,MAafuD,EAAoB,kBAAM,SAAA1B,GAC9BA,EAhD6B,uBAkD7BI,YACE,kBAAMJ,EAhDgB,0BAiDtB,OC/BW2B,G,MAjBE,SAAC,GAAD,QACfC,SAAY9G,EADG,EACHA,GAAInB,EADD,EACCA,MAAOkF,EADR,EACQA,MAAOI,EADf,EACeA,SAAUN,EADzB,EACyBA,MAAOxE,EADhC,EACgCA,SAAUyE,EAD1C,EAC0CA,MACzDvG,EAFe,EAEfA,MAAOwJ,EAFQ,EAERA,SAAUC,EAFF,EAEEA,SAAUC,EAFZ,EAEYA,OAFZ,OAGX,kBAAC,WAAD,KACJ,wBAAIC,MAAM,SAAS3J,GACnB,4BAAKsB,GACL,4BAAKsF,EAAUJ,GACf,4BAAKF,GACL,4BAAKxE,GACL,wBAAImG,UAAU,yBACZ,4BAAQ2B,QAAS,kBAAMJ,EAAS/G,IAAKwF,UAAU,2BAA0B,uBAAGA,UAAU,wBACtF,4BAAQ2B,QAAS,kBAAMH,EAAShH,IAAKwF,UAAU,2BAA0B,uBAAGA,UAAU,uBACtF,4BAAQ2B,QAAS,kBAAMF,EAAOjH,IAAKwF,UAAU,0BAAyB,uBAAGA,UAAU,oBAErF,wBAAIA,UAAU,cAAcrB,EAAUL,MCjBzBsD,G,MCGF,SAACvB,GACZ,IACEpB,EAEEoB,EAFFpB,UAAWN,EAET0B,EAFS1B,SAAUL,EAEnB+B,EAFmB/B,MACrBuD,EACExB,EADFwB,UAOF,OAAO,yBAAK7B,UAAU,eACpB,2BAAOA,UAAU,SACf,+BACE,4BACE,wBAAI0B,MAAM,OAAV,KACA,wBAAIA,MAAM,OAAV,QACA,wBAAIA,MAAM,OAAV,SACA,wBAAIA,MAAM,OAAV,SACA,wBAAIA,MAAM,MAAM1B,UAAU,qBAA1B,qBACA,wBAAI0B,MAAM,OAAV,UACA,wBAAI1B,UAAU,aAAa0B,MAAM,OAAjC,WAGJ,+BAAQzC,EAAU1F,KAjBJ,SAACC,EAAMzB,GAAP,OAAiB,wBAAIE,IAAKuB,EAAKgB,IAC/C,kBAAC,EAAD,iBAAc6F,EAAd,CAAqBiB,SAAU9H,EAAMzB,MAAOA,WAmB5C,yBAAKiI,UAAU,2EACb,4BAAQ2B,QAASE,EAAW7B,UAAU,kBAAtC,cADF,UAEUrB,EAAUL,MCZlBwD,EAAqB,CACzBP,SJRmB,SAAA1D,GAAM,MAAK,CAAE1B,KAAM,qBAAsB0B,WIS5D2D,SJRmB,SAAA3D,GAAM,MAAK,CAAE1B,KAAM,qBAAsB0B,WIS5D4D,OJcyB,SAAC5D,GAAD,OAAY,SAAA6B,GACrCA,EA7BiB,SAAA7B,GAAM,MAAK,CAAE1B,KAAM,8BAA+B0B,UA6B1DkE,CAAWlE,IACpB6B,EAxBiB,SAAA7B,GAAM,MAAK,CAAE1B,KAAM,mBAAoB0B,UAwB/CmE,CAAWnE,MIfpBgE,UJkBgB,kBAAM,SAAAnC,GAhCF,IAAA7B,EAiCpB6B,EAjC+B,CAAEvD,KAAM,mCAAoC0B,WAkC3E6B,EA5B0B,gCKfbuC,ED0BAC,aAfS,SAAC,GAAD,QAAGlD,UAAH,MAAoD,CAAEC,UAAtD,EAAgBA,UAAiDN,SAAjE,EAA2BA,SAAgDL,MAA3E,EAAqCA,SAerBwD,EAAzBI,EAjBO,SAAC7B,GAAD,OAAW,kBAAC,EAASA,MEH5B8B,EAJE,kBAAM,kBAAC,WAAD,KACrB,kBAAC,EAAD,Q,SCDIC,I,MAAS,SAAC,GAAD,IAAGC,EAAH,EAAGA,OAAH,OACb,wBAAIrC,UAAU,qDACX,CAAC,EAAG,EAAG,EAAG,EAAG,GAAGzG,KAAI,SAACC,GAAD,OACnB,wBAAIvB,IAAKuB,GACP,0BAAMwG,UAAS,qBAAgBqC,GAAU7I,EAAO,UAAY,aCNrD8I,GDWE,SAAC,GAAD,QACflJ,KAAQC,EADO,EACPA,MAAOC,EADA,EACAA,OAAQiF,EADR,EACQA,MAAOgE,EADf,EACeA,MAAOF,EADtB,EACsBA,OAAQ1D,EAD9B,EAC8BA,SAAU9E,EADxC,EACwCA,SAAUgB,EADlD,EACkDA,SACjEoG,EAFe,EAEfA,cAFe,OAIf,yBAAKjB,UAAU,8BACb,yBAAKA,UAAU,uBACb,yBAAKwC,IAAKD,EAAOE,IAAKpJ,KAExB,yBAAK2G,UAAU,qDACb,kBAAC,GAAD,CAAQqC,OAAQA,IAChB,yBAAKrC,UAAU,+BAA+B3G,EAAMN,eACpD,yBAAKiH,UAAU,wBAAwB1G,GAErCO,EACE,kBAAC,WAAD,KACE,yBAAKmG,UAAU,uBAAuBrB,EAAUJ,GAE9C1D,EACE,4BAAQmF,UAAU,wCAAwC0C,UAAQ,GAAlE,SAEA,4BAAQf,QAASV,EAAejB,UAAU,yCAA1C,gBAIN,yBAAKA,UAAU,oCAAf,mB,kBE9BFrH,GAAWD,EAAXC,OAEFgK,GAAe,SAAC,GAAD,IAAG3H,EAAH,EAAGA,OAAQ4H,EAAX,EAAWA,MAAOC,EAAlB,EAAkBA,KAAMlB,EAAxB,EAAwBA,QAAxB,OACnB,4BACEA,QAASA,EACTxF,KAAK,SACL6D,UAAS,2DAAsD4C,EAAQ,cAAgB,kBAEtFC,EpBbY,aoBcX7H,EACA,kBAAC,WAAD,aAEE,0BAAMgF,UAAS,oBAAe4C,IAA9B,UAFF,YAIE,0BAAM5C,UAAS,qBAAgB4C,IAA/B,YACY,KCpBLE,GDwBE,SAACzC,GAEhB,IACEjG,EAEEiG,EAFFjG,MAAOc,EAELmF,EAFKnF,QACPuF,EACEJ,EADFI,SAAUD,EACRH,EADQG,aAAcS,EACtBZ,EADsBY,cAG1B,OAAO,yBAAKjB,UAAU,OACpB,yBAAKA,UAAU,yBACb,2BACE+C,SAAU,SAACC,GAAD,OAAOvC,EAASuC,EAAEC,OAAOnL,QACnCA,MAAOoD,EAAO,UACd8E,UAAU,eACV7D,KAAK,OACL+G,YAAY,gCAGhB,yBAAKlD,UAAU,mDACb,wBAAIA,UAAU,yBAAd,YACA,yBAAKA,UAAU,8CACZ3D,OAAOC,QAAQpB,GAAS3B,KAAI,mCAAEtB,EAAF,KAAOH,EAAP,WpBxCnB,coBwCqCG,EAC7C,KACA,kBAAC,GAAD,CACEA,IAAKA,EACL+C,OAAQ/C,EACR2K,MAAO9K,EACP+K,KAAMlK,GAAOV,GACb0J,QAAS,kBAAMnB,EAAavI,WAKpC,wBAAI+H,UAAU,iCACX5F,EAAMb,KAAI,gBAAGiB,EAAH,EAAGA,GAAOpB,EAAV,0BACT,wBAAI4G,UAAU,WAAW/H,IAAKuC,GAC5B,kBAAC,GAAD,CAAUpB,KAAMA,EAAM6H,cAAe,kBAAMA,EAAczG,aE3DpD2I,I,MCEC,kBAAM,yBAAKnD,UAAU,cACnC,yBAAKA,UAAU,yBACb,8BACA,8BACA,6BAAK,+BACL,6BAAK,mCCHMoD,GALI,sCAAIC,EAAJ,yBAAIA,EAAJ,uBAAc,SAACC,GAAD,OAAUD,EAAME,aAC/C,SAACC,EAAMC,GAAP,OAAaA,EAAED,KACfF,KCAII,GAA0BC,0BAC1BC,GAA2BF,GAAwBG,SACnDC,GAA2BJ,GAAwBK,SCG1CC,GAJI,SAACC,GAAD,OAAY,SAACC,GAAD,OAAU,SAAC7D,GAAD,OAAW,kBAACyD,GAAD,MACjD,SAACnD,GAAD,OAAsB,kBAACuD,EAAD,eAAMlE,UAAWiE,GAAY5D,EAA7B,CAAoCM,iBAAkBA,W,6ECMzEwD,G,uKAEJ,WACE,MAAgDhE,KAAKE,MAA7Ce,EAAR,EAAQA,kBAAmBhH,EAA3B,EAA2BA,MAAOsG,EAAlC,EAAkCA,WAClCtG,EAAM2B,OAAS,EAAIqF,IAAsBV,M,oBAG3C,WACE,MAGIP,KAAKE,MAFP7C,EADF,EACEA,UAAWC,EADb,EACaA,MACR4C,GAFL,EACoBK,WADpB,EACgCU,kBADhC,EACmDT,iBADnD,oBAKA,OAAInD,EACK,kBAAC,GAAD,MACEC,EACF,kBAAC,EAAD,MAEA,kBAAC,GAAa4C,O,GAlBKE,aCTjB4D,GD+EAf,GACbY,KACA9B,aAJsB,SAAC,GAAD,IAAG3H,EAAH,EAAGA,WAAH,sBAA0BA,MAVvB,SAACmF,EAAD,GAAqC,IAAxBiB,EAAuB,EAAvBA,iBACtC,OAAOyD,YAAmB,CACxB1D,WAAYA,EAAWC,GACvBS,oBACAH,gBACAT,eACAC,YACCf,MAKU0D,CAGbe,IE5EaE,GAJE,kBAAM,kBAAC,WAAD,KACrB,kBAAC,GAAD,QCHaC,I,YCkBApC,aAFS,SAAC,GAAD,QAAGlD,UAAaC,EAAhB,EAAgBA,UAAWN,EAA3B,EAA2BA,SAAUL,EAArC,EAAqCA,MAArC,MAAoD,CAAEiG,YAAatF,EAAUlD,OAAQ4C,WAAUL,WAExG4D,EAdA,SAAC,GAAD,IAAGqC,EAAH,EAAGA,YAAa5F,EAAhB,EAAgBA,SAAUL,EAA1B,EAA0BA,MAA1B,OACd,yBAAK0B,UAAU,+CACd,4BAAQA,UAAU,aACjB,yBAAKA,UAAU,yDACd,kBAAC,IAAD,CAAMwE,GAAG,oBAAoBxE,UAAU,mBAAvC,aACA,kBAAC,IAAD,CAAMwE,GAAG,yBACR,uBAAGxE,UAAU,wBADd,IACwCuE,EADxC,WAC6D5F,EAAUL,EADvE,YCTWmG,GCKH,kBACX,kBAAC,WAAD,KACC,kBAAC,GAAD,MACA,0BAAMC,KAAK,OAAO1E,UAAU,kBAC3B,kBAAC,IAAD,KAGC,kBAAC,IAAD,CAAO2E,KAAK,oBAAoBC,UAAWP,GAAUQ,OAAK,IAC1D,kBAAC,IAAD,CAAOF,KAAK,wBAAwBC,UAAWzC,QCd9B2C,G,8DACpBC,MAAQ,CAAC,CACRvK,GAAI,EACJnB,MAAO,SACPC,OAAQ,+BACRiF,MAAO,aACPI,SAAU,GACV9E,SAAU,EACV0I,MAAO,uCACP1H,UAAU,EACVwH,OAAQ,GACN,CACF7H,GAAI,EACJnB,MAAO,0BACPC,OAAQ,oBACRiF,MAAO,EACPI,SAAU,IACV9E,SAAU,EACV0I,MAAO,8EACP1H,UAAU,EACVwH,OAAQ,GACN,CACF7H,GAAI,EACJnB,MAAO,kBACPC,OAAQ,yBACRiF,MAAO,EACPI,SAAU,IACV9E,SAAU,EACV0I,MAAO,mEACP1H,UAAU,EACVwH,OAAQ,GACN,CACF7H,GAAI,EACJnB,MAAO,kBACPC,OAAQ,eACRiF,MAAO,EACPI,SAAU,IACV9E,SAAU,EACV0I,MAAO,qEACP1H,UAAU,EACVwH,OAAQ,GAEN,CACF7H,GAAI,EACJnB,MAAO,eACPC,OAAQ,cACRiF,MAAO,EACPI,SAAU,IACV9E,SAAU,EACV0I,MAAO,4GACP1H,UAAU,EACVwH,OAAQ,GAEN,CACF7H,GAAI,EACJnB,MAAO,0BACPC,OAAQ,kBACRiF,MAAO,EACPI,SAAU,IACV9E,SAAU,EACV0I,MAAO,yFACP1H,UAAU,EACVwH,OAAQ,I,KAGTzB,SAAW,kBAAM,IAAIoE,SAAQ,SAACC,EAASC,GAAV,OAAqBpF,YAAW,WAM3DmF,EAAQ,EAAKF,SAEZ,YC5DJI,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,CAAU/F,MAAOA,GACf,kBAAC,EAAD,KACE,kBAACsE,GAAD,CAA0B9L,MAAO,IAAIgN,IACnC,kBAAC,IAAD,KACE,kBAAC,GAAD,WAMVQ,SAASC,eAAe,W","file":"static/js/main.79a74316.chunk.js","sourcesContent":["const BY_RATING = 'BY_RATING';\nconst IN_STOCK = 'IN_STOCK';\nconst BY_PRICE = 'BY_PRICE';\nconst TO_HIGH = 'TO_HIGH';\nconst TO_LOW = 'TO_LOW';\nconst SEARCH_BY = 'SEARCH_BY';\n\n// `optionsOf` element in `array` with `value`\nconst optionsOf = (array, value, key = 'id') => {\n  let index, element;\n\n  const isIn = array.some((elem, i) => {\n    index = i;\n    element = elem;\n    return elem[key] === value;\n  });\n\n  if (!isIn) {\n    index = -1;\n    element = null;\n  }\n\n  return { isIn, index, element };\n}\n// const { index, element } = optionsOf(array, id, 'id');\n\nconst arrayToLowerCase = (...array) => array.map(item => item.toLowerCase());\nconst isSub = (string, sub) => string.indexOf(sub) > -1\n\nconst sortMethods = {\n  toText: value => value.toString().split('_').join(' ').toLowerCase(),\n  toKey: value => value.toString().split('_').join('').toLowerCase(),\n  toParameter: value => value.toString().split('_')[1].toLowerCase(),\n\n  searchby: {\n    'true': request => book => {\n      let { title, author } = book;\n      [title, author, request] = arrayToLowerCase(title, author, request.trim())\n\n      if (isSub(title, request) || isSub(author, request)) {\n        return book;\n      }\n    },\n\n    'false': () => a => a\n  },\n  instock: {\n    'true': () => a => a.quantity > 0,\n    'false': () => a => a\n  },\n  byrating: {\n    tohigh: (key) => (a, b) => a[key] - b[key],\n    tolow: (key) => (a, b) => b[key] - a[key],\n  },\n  byprice: {\n    tohigh: (key) => (a, b) => a[key] - b[key],\n    tolow: (key) => (a, b) => b[key] - a[key],\n  }\n};\n\nexport {\n  BY_RATING, IN_STOCK, BY_PRICE, TO_HIGH, TO_LOW, SEARCH_BY,\n  optionsOf, sortMethods,\n}","import { optionsOf } from '../utils';\n\nconst upBooks = (books, index, book) => [\n  ...books.slice(0, index), { ...book }, ...books.slice(index + 1)\n];\n\nconst unsetAllAsAdded = booksState => {\n  let { books, cache } = booksState;\n  books = books.map(book => ({ ...book, isInCart: false }));\n  cache = cache.map(book => ({ ...book, isInCart: false }));\n  return { ...booksState, books, cache }\n}\n\nconst toggleAsAdded = (booksState, id, value) => {\n  let { books, cache } = booksState;\n\n  const { index, element: book } = optionsOf(books, id);\n  const { index: indexInCache, element: bookInCache } = optionsOf(cache, id);\n\n  const newBook = { ...book, isInCart: value };\n  const newBookInCache = { ...bookInCache, isInCart: value };\n  books = upBooks(books, index, newBook);\n  cache = upBooks(cache, indexInCache, newBookInCache);\n  return { ...booksState, books, cache }\n}\n\nexport { unsetAllAsAdded, toggleAsAdded };","import { IN_STOCK, BY_RATING, TO_LOW, TO_HIGH, sortMethods } from '../utils';\n\nconst isNotSearch = request => request === false;\nconst isInStock = filter => filter === IN_STOCK;\nconst isByRating = filter => filter === BY_RATING;\n\nconst toggleValue = value => value ? false : true;\nconst switchValue = value => (value) ? ((value === TO_LOW) ? TO_HIGH : false) : TO_LOW;\n\nconst forInStock = (filters, value) => ({ ...filters, IN_STOCK: value });\nconst forRating = (filters, value) => ({ ...filters, BY_RATING: value, BY_PRICE: false });\nconst forPrice = (filters, value) => ({ ...filters, BY_RATING: false, BY_PRICE: value });\n\nconst setFilter_button = (booksState, filter) => {\n  let { filters } = booksState;\n  let value = filters[filter];\n\n  value = isInStock(filter) ? toggleValue(value) : switchValue(value);\n\n  filters = isInStock(filter) ?\n    forInStock(filters, value) :\n    isByRating(filter) ? forRating(filters, value) : forPrice(filters, value);\n\n  return { ...booksState, filters };\n}\n\nconst isEmpty = string => string[string.length - 1] === ' ';\n\nconst setFilter_search = (booksState, request) => {\n  let { filters } = booksState;\n  const specialCharacter = isEmpty(request) ? ' ' : '';\n  request = request.trim() + specialCharacter;\n  filters = { ...filters, BY_RATING: false, BY_PRICE: false, SEARCH_BY: request };\n  return { ...booksState, filters };\n}\n\nconst setFilter = (booksState, filter, request) => {\n  booksState = isNotSearch(request) ?\n    setFilter_button(booksState, filter) :\n    setFilter_search(booksState, request);\n  return { ...booksState };\n}\n\nconst isAllFalse = array => !array.find(item => !!item);\nconst prepareSearchParam = param => param === '' ? false : true;\nconst isSearchBy = type => type === 'searchby';\nconst isSwitch = type => type === 'byrating' || type === 'byprice';\n\nconst filterBy = (array, type, param) => {\n  const ms = sortMethods;\n  const { toKey, toParameter } = ms;\n\n  let request = param;\n  let argument = toParameter(type);\n\n  type = toKey(type);\n  param = isSearchBy(type) ? prepareSearchParam(param) : toKey(param);\n\n\n  array = isSwitch(type) ?\n    array.sort(ms[type][param](argument)) :\n    isSearchBy(type) ?\n      array.filter(ms[type][param](request)) :\n      array.filter(ms[type][param](argument));\n\n  return [...array];\n}\n\nconst filterBooks = booksState => {\n  let { cache, filters } = booksState;\n  let books = Object.entries(filters).reduce((acc, curr) => {\n    const [key, value] = curr;\n    return !!value ? filterBy(acc, key, value) : [...acc];\n  }, cache);\n  return [...books];\n}\n\nconst touchFilters = booksState => {\n  let { cache, filters } = booksState;\n  const books = isAllFalse(Object.values(filters)) ? [...cache] : filterBooks(booksState);\n  return { ...booksState, books };\n}\n\nconst filtered = (booksState, changed, request) => {  \n  booksState = setFilter(booksState, changed, request);\n  booksState = touchFilters(booksState, changed, request);\n  return { ...booksState };\n}\n\nexport default filtered;","import { unsetAllAsAdded, toggleAsAdded } from './upBooksState.added';\nimport filtered from './upBooksState.filtered';\nimport { SEARCH_BY } from '../utils';\n\nconst INIT_FILTERS = { IN_STOCK: false, BY_RATING: false, BY_PRICE: false, SEARCH_BY: '' };\nconst INIT_BOOKS_STATE = {\n  cache: [],\n  books: [],\n  isLoading: true,\n  error: null,\n  filters: { ...INIT_FILTERS },\n};\n\nconst upBooksState = (state, action) => {\n  if (!state) return { ...INIT_BOOKS_STATE };\n\n  // action.params are different for every action \n  const {\n    type,\n    bookId: id,\n    filter, request,\n    newBooks,\n    error\n  } = action;\n\n  const { booksState } = state;\n  const { cache } = booksState;\n\n  switch (type) {\n    case 'FETCH_BOOKS_REQUEST': return { ...booksState, isLoading: true };\n    // newBooks\n    case 'FETCH_BOOKS_SUCCESS': return {\n      ...booksState, books: [...newBooks], cache: [...newBooks], isLoading: false\n    };\n    // error\n    case 'FETCH_BOOKS_FAILURE': return { ...booksState, isLoading: false, error };\n    case 'GET_BOOKS_FROM_CACHE': return { ...booksState, books: [...cache], isLoading: false, filters: { ...INIT_FILTERS } };\n    // filter\n    case 'TOGGLE_FILTER': return filtered(booksState, filter, false);\n    // request\n    case 'SEARCH_BY': return filtered(booksState, SEARCH_BY, request);\n\n    case 'SET_BOOK_AS_ADDED_TO_CART': return toggleAsAdded(booksState, id, true);\n    case 'UNSET_BOOK_AS_ADDED_TO_CART': return toggleAsAdded(booksState, id, false);\n    case 'UNSET_ALL_BOOKS_AS_ADDED_TO_CART': return unsetAllAsAdded(booksState);\n\n    default: return booksState;\n  }\n}\n\nexport { \n  upBooksState, INIT_BOOKS_STATE \n};","import { optionsOf } from '../utils'; \n\nconst getTotal = items => items.reduce((acc, curr) => acc + curr.total, 0);\n\nconst findBook = (id, books) => books.find((book) => book.id === id);\nconst bookToItem = ({ id, title, price, currency, quantity }) => ({ id, title, price, currency, quantity });\n\nconst ifNotOne = (count) => count > 1 ? count - 1 : count;\nconst ifNotMax = (count, quantity) => count < quantity ? count + 1 : count;\n\nconst upCart_items = (items, index, item = null) => item ?\n  optionsOf(items, item.id).isIn ?\n    [...items.slice(0, index), item, ...items.slice(index + 1)]\n    :\n    [...items, item]\n  :\n  [...items.slice(0, index), ...items.slice(index + 1)];\n\nconst upCart_itemCount = (items, item, index, getNewCount) => {\n  const newCount = getNewCount();\n  return upCart_items(items, index, { ...item, count: newCount, total: newCount * item.price });\n}\n\nconst upCart = (items, item, isInCart, index, quantity, actionType) => {\n  const { count } = item;\n\n  switch (actionType) {\n    case 'DEC': return upCart_itemCount(items, item, index, () => ifNotOne(count));\n    case 'INC': return upCart_itemCount(items, item, index, () => ifNotMax(count, quantity));\n    case 'REM': return upCart_items(items, index);\n\n    default: return isInCart ? items : upCart_itemCount(items, item, index, () => 1);\n\n    // default: return isInCart ?\n    //   upCart_itemCount(items, item, index, () => ifNotMax(count, quantity)) :\n    //   upCart_itemCount(items, item, index, () => 1);\n  }\n}\n\nconst newCartItems = (items, id, books, actionType) => {\n  let { isIn: isInCart, element: item, index } = optionsOf(items, id);\n  const book = findBook(id, books);\n  if (!isInCart) item = bookToItem(book);\n  return upCart(items, item, isInCart, index, book.quantity, actionType);\n}\n\nconst counteraction = (cartState, cartItems, id, books, actionType) => {\n  const newItems = newCartItems(cartItems, id, books, actionType);\n  const total = getTotal(newItems);\n  return { ...cartState, cartItems: newItems, total };\n}\n\nconst upCartState = (state, action) => {\n  const initialCartState = {\n    cartItems: [],\n    currency: '$',\n    total: 0\n  };\n\n  if (!state) return initialCartState;\n\n  const id = action.bookId;\n  const { cartState } = state;\n  const { cartState: { cartItems }, booksState: { books } } = state;\n\n  switch (action.type) {\n    case 'ADD_BOOK_TO_CART': return counteraction(cartState, cartItems, id, books);\n    case 'DECREASE_ITEM_CART': return counteraction(cartState, cartItems, id, books, 'DEC');\n    case 'INCREASE_ITEM_CART': return counteraction(cartState, cartItems, id, books, 'INC');\n    case 'REMOVE_ITEM_CART': return counteraction(cartState, cartItems, id, books, 'REM');\n    case 'REMOVE_ALL_ITEM_FROM_CART': return initialCartState;\n    default: return cartState;\n  }\n}\n\nexport default upCartState;","import { upBooksState } from './upBooksState';\nimport upCartState from './upCartState';\n\nconst reducer = (state, action) => {\n  // console.log(action.type);\n  // console.log(state);\n\n  return {\n    booksState: upBooksState(state, action),\n    cartState: upCartState(state, action),\n  }\n}\n\nexport default reducer;","import { createStore, applyMiddleware } from \"redux\";\nimport thunk from \"redux-thunk\";\nimport reducer from \"./reducers\";\n\n// .... = ({getState, dispatch}) => (next)     => (action) => {\nconst stringMiddleware = (store) => (dispatch) => (action) => {\n  if (typeof action === 'string') return dispatch({ type: action });\n  return dispatch(action);\n}\n\nconst logMiddleware = (store) => (dispatch) => (action) => {\n  console.log(action.type);\n  return dispatch(action);\n}\n\nconst store = createStore(\n  // ...., storeEnhancer\n  reducer, applyMiddleware(\n    thunk,\n    stringMiddleware,\n    logMiddleware\n  )\n);\n\nstore.dispatch('TEST');\n\n// const delayedAction = (dispatch) => {\n//   setTimeout(() => dispatch({ type: 'DELAYED_ACTION' }), 4000);\n// };\n\n// const delayedActionCreator = (timeout) => (dispatch) => {\n//   setTimeout(() => dispatch({ type: 'DELAYED_ACTION' }), timeout);\n// };\n\nconst delayedActionCreator = (timeout) => (dispatch) => {\n  setTimeout(() => dispatch({ type: 'DELAYED_ACTION' }), timeout);\n};\n\nstore.dispatch(delayedActionCreator(4000));\n\nexport default store;","import ErrorView from './ErrorView';\nexport default ErrorView;","import React from 'react';\nimport './ErrorView.css';\n\nconst ErrorView = () => <div className=\"rs-error-view\">\n  Something went wrong..\n</div>\n\nexport default ErrorView;\n","import ErrorCatcher from './ErrorCatcher';\nexport default ErrorCatcher;","import React, { Component } from 'react';\nimport ErrorView from '../ErrorView';\n\nexport default class ErrorCatcher extends Component {\n  state = { isHasError: false };\n  componentDidCatch() { this.setState({ isHasError: true }) }\n\n  render() {\n    if (this.state.isHasError) {\n      return <div className={this.props.className}><ErrorView /></div>;\n    } else {\n      return this.props.children;\n    }\n  }\n}\n","const showLoadingBooks = () => 'FETCH_BOOKS_REQUEST';\nconst uploadBooks = newBooks => ({ type: 'FETCH_BOOKS_SUCCESS', newBooks });\nconst errorBooks = error => ({ type: 'FETCH_BOOKS_FAILURE', error });\nconst cachedBooks = () => 'GET_BOOKS_FROM_CACHE';\n\nconst toggleFilter = filter => ({ type: 'TOGGLE_FILTER', filter });\nconst searchBy = request => ({ type: 'SEARCH_BY', request });\n\nconst setAdded = bookId => ({ type: 'SET_BOOK_AS_ADDED_TO_CART', bookId });\nconst unsetAdded = bookId => ({ type: 'UNSET_BOOK_AS_ADDED_TO_CART', bookId });\nconst unsetAddedAll = bookId => ({ type: 'UNSET_ALL_BOOKS_AS_ADDED_TO_CART', bookId });\nconst addToCart = bookId => ({ type: 'ADD_BOOK_TO_CART', bookId });\n\nconst decreaseItem = bookId => ({ type: 'DECREASE_ITEM_CART', bookId });\nconst increaseItem = bookId => ({ type: 'INCREASE_ITEM_CART', bookId });\nconst removeItem = bookId => ({ type: 'REMOVE_ITEM_CART', bookId });\nconst removeItemAll = () => 'REMOVE_ALL_ITEM_FROM_CART';\n\n// const fetchBooks = (dispatch, bookstoreService) => () => {\n//   dispatch(resetBooks());\n//   bookstoreService.getBooks()\n//     .then((data) => dispatch(uploadBooks(data)))\n//     .catch((error) => dispatch(errorBooks(error)));\n// }\n\nconst fetchBooks = bookstoreService => () => dispatch => {\n  dispatch(showLoadingBooks());\n  bookstoreService.getBooks()\n    .then((data) => dispatch(uploadBooks(data)))\n    .catch((error) => dispatch(errorBooks(error)));\n}\n\nconst addBookToCart = (bookId) => dispatch => {\n  dispatch(setAdded(bookId));\n  dispatch(addToCart(bookId));\n}\n\nconst removeBookFromCart = (bookId) => dispatch => {\n  dispatch(unsetAdded(bookId));\n  dispatch(removeItem(bookId));\n}\n\nconst clearCart = () => dispatch => {\n  dispatch(unsetAddedAll());\n  dispatch(removeItemAll());\n}\n\nconst getBooksFromCache = () => dispatch => {\n  dispatch(showLoadingBooks());\n\n  setTimeout(\n    () => dispatch(cachedBooks()),\n    500\n  );\n}\n\nexport {\n  // test\n  uploadBooks,\n  \n  fetchBooks, getBooksFromCache,\n  toggleFilter, searchBy, \n  addBookToCart, removeBookFromCart,\n  decreaseItem, increaseItem,\n  clearCart\n};","import React from 'react';\nimport './CartItem.css';\nimport { Fragment } from 'react';\n\nconst CartItem = ({ \n  cartItem: { id, title, price, currency, count, quantity, total },\n  index, decrease, increase, remove \n}) => <Fragment>\n  <th scope=\"row\">{++index}</th>\n  <td>{title}</td>\n  <td>{currency}{price}</td>\n  <td>{count}</td>\n  <td>{quantity}</td>\n  <td className=\"rs-cart-item__actions\">\n    <button onClick={() => decrease(id)} className=\"btn btn-outline-warning\"><i className=\"fa fa-minus-circle\" /></button>\n    <button onClick={() => increase(id)} className=\"btn btn-outline-success\"><i className=\"fa fa-plus-circle\" /></button>\n    <button onClick={() => remove(id)} className=\"btn btn-outline-danger\"><i className=\"fa fa-trash-o\" /></button>\n  </td>\n  <td className=\"text-right\">{currency}{total}</td>\n</Fragment>\n\nexport default CartItem;","import Cart from './Cart';\nexport default Cart;","import React from 'react';\nimport CartItem from '../CartItem/CartItem';\nimport './Cart.css';\n\nconst Cart = (props) => {\n  const { \n    cartItems, currency, total, \n    clearCart \n  } = props;\n  \n  const renderRow = (item, index) => <tr key={item.id}>\n    <CartItem {...props} cartItem={item} index={index} />\n  </tr>\n\n  return <div className=\"rs-cart row\">\n    <table className=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">#</th>\n          <th scope=\"col\">Item</th>\n          <th scope=\"col\">Price</th>\n          <th scope=\"col\">Count</th>\n          <th scope=\"col\" className=\"rs-cart__quantity\">Quantity in store</th>\n          <th scope=\"col\">Action</th>\n          <th className=\"text-right\" scope=\"col\">Total</th>\n        </tr>\n      </thead>\n      <tbody>{cartItems.map(renderRow)}</tbody>\n    </table>\n\n    <div className=\"rs-cart__footer d-flex justify-content-between align-items-center w-100\">\n      <button onClick={clearCart} className=\"btn btn-danger\">clear cart</button>\n      Total: {currency}{total}\n    </div>\n  </div>\n}\n\nexport default Cart;","import { connect } from 'react-redux';\nimport { \n  removeBookFromCart,\n  decreaseItem, increaseItem, \n  clearCart \n} from '../../actions';\n\nimport React from 'react';\nimport Cart from '../../components/Cart';\n\nconst CartContainer = (props) => <Cart {...props} />\n\nconst mapStateToProps = ({ cartState: { cartItems, currency, total } }) => ({ cartItems, currency, total });\n\n// const mapDispatchToProps = (dispatch) => ({\n//   decrease: (id) => dispatch(decreaseItem(id)),\n//   increase: (id) => dispatch(increaseItem(id)),\n//   remove: (id) => dispatch(removeItem(id)),\n// });\n\nconst mapDispatchToProps = {\n  decrease: decreaseItem,\n  increase: increaseItem,\n  remove: removeBookFromCart,\n  clearCart: clearCart,\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CartContainer);","import CartContainer from './CartContainer';\nexport default CartContainer;","import React, { Fragment } from 'react'; \nimport CartContainer from '../../containers/CartContainer';\n\nconst CartPage = () => <Fragment>\n  <CartContainer />\n</Fragment>\n\nexport default CartPage;","import React, { Fragment } from 'react';\nimport './BookItem.css';\n\nconst Rating = ({ rating }) =>\n  <ul className=\"rs-book-item__rating d-flex p-0 m-0 list-unstyled\">\n    {[1, 2, 3, 4, 5].map((item) =>\n      <li key={item}>\n        <span className={`fa fa-star ${rating >= item ? 'checked' : ''}`}></span>\n      </li>\n    )}\n  </ul>\n\nconst BookItem = ({\n  book: { title, author, price, cover, rating, currency, quantity, isInCart },\n  addBookToCart\n}) =>\n  <div className=\"rs-book-item d-flex border\">\n    <div className=\"rs-book-item__cover\">\n      <img src={cover} alt={title} />\n    </div>\n    <div className=\"rs-book-item__info d-flex flex-column flex-grow-1\">\n      <Rating rating={rating} />\n      <div className=\"rs-book-item__title rs-font\">{title.toLowerCase()}</div>\n      <div className=\"rs-book-item__author\">{author}</div>\n      {\n        quantity ?\n          <Fragment>\n            <div className=\"rs-book-item__price\">{currency}{price}</div>\n            {\n              isInCart ?\n                <button className=\"rs-add-to-cart btn btn-warning btn-sm\" disabled>added</button>\n                :\n                <button onClick={addBookToCart} className=\"rs-add-to-cart btn btn-warning btn-sm\">add to cart</button>\n            }\n          </Fragment>\n          :\n          <div className=\"rs-book-item__info--out-of-stock\">Out of stock</div>\n      }\n    </div>\n  </div>\n\nexport default BookItem;","import BookItem from './BookItem';\nexport default BookItem;\n","import React, { Fragment } from 'react';\nimport BookItem from '../BookItem';\n\nimport './BookList.css';\nimport { IN_STOCK, sortMethods, SEARCH_BY } from '../../utils';\n\nconst { toText } = sortMethods;\n\nconst FilterButton = ({ filter, isSet, text, onClick }) =>\n  <button\n    onClick={onClick}\n    type=\"button\"\n    className={`mb-1 mb-sm-0 ml-0 ml-sm-2 flex-grow-1 btn btn-sm ${isSet ? 'btn-success' : 'btn-secondary'}`}\n  >\n    {text}\n    {(filter !== IN_STOCK) ? \n      <Fragment>\n        :&nbsp;\n        <span className={`rs-to-low ${isSet}`}>to low</span>\n        &nbsp;/&nbsp;\n        <span className={`rs-to-high ${isSet}`}>to high</span>\n      </Fragment> : ''\n    }\n  </button>\n\nconst BookList = (props) => {\n  \n  const { \n    books, filters, \n    searchBy, toggleFilter, addBookToCart \n  } = props;\n  \n  return <div className=\"row\">\n    <div className=\"rs-p-after mb-2 w-100\">\n      <input\n        onChange={(e) => searchBy(e.target.value)} \n        value={filters[SEARCH_BY]}\n        className=\"form-control\" \n        type=\"text\" \n        placeholder=\"search by title and author\" />\n    </div>\n\n    <div className=\"rs-book-list__sort rs-p-after mb-2 w-100 d-flex\">\n      <h4 className=\"m-0 d-none d-sm-block\">Sort by:</h4>\n      <div className=\"d-flex flex-column flex-sm-row flex-grow-1\">\n        {Object.entries(filters).map(([key, value]) => key === SEARCH_BY ? \n          null :\n          <FilterButton \n            key={key} \n            filter={key}\n            isSet={value} \n            text={toText(key)} \n            onClick={() => toggleFilter(key)} />\n        )}\n      </div>\n    </div>\n\n    <ul className=\"rs-book-list d-flex flex-wrap\">\n      {books.map(({ id, ...book }) =>\n        <li className=\"col-md-6\" key={id}>\n          <BookItem book={book} addBookToCart={() => addBookToCart(id)} />\n        </li>\n      )}\n    </ul>\n  </div>\n}\n\nexport default BookList;","import BookList from './BookList';\nexport default BookList;\n","import Spinner from './Spinner';\nexport default Spinner;","import React from 'react';\nimport './Spinner.css';\n\nconst Spinner = () => <div className=\"rs-spinner\">\n  <div className=\"rs-spinner__animation\">\n    <div></div>\n    <div></div>\n    <div><div></div></div>\n    <div><div></div></div>\n  </div>\n</div>\n\nexport default Spinner;","const composeHoc = (...funcs) => (comp) => funcs.reduceRight(\n  (prev, f) => f(prev), \n  comp\n);\n\nexport default composeHoc;","import { createContext } from 'react';\n\nconst ContextBookstoreService = createContext();\nconst ProviderBookstoreService = ContextBookstoreService.Provider;\nconst ConsumerBookstoreService = ContextBookstoreService.Consumer;\n\nexport {\n  ContextBookstoreService,\n  ProviderBookstoreService,\n  ConsumerBookstoreService,\n};","import React from 'react';\nimport { ConsumerBookstoreService } from '../BookstoreServiceContext';\n\nconst connectHoc = (params) => (View) => (props) => <ConsumerBookstoreService>\n  {(bookstoreService) => <View className={params} {...props} bookstoreService={bookstoreService} />}\n</ConsumerBookstoreService>\n\nexport default connectHoc;","import { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { searchBy, toggleFilter, addBookToCart, getBooksFromCache, fetchBooks } from '../../actions';\n\nimport React, { Component } from 'react';\nimport BookList from '../../components/BookList';\nimport Spinner from '../../components/Spinner';\nimport ErrorView from '../../components/ErrorView';\nimport { composeHoc, connectHoc } from '../../components/Hoc';\n\nclass BookListContainer extends Component {\n\n  componentDidMount() { \n    const { getBooksFromCache, books, fetchBooks} = this.props;\n    books.length > 0 ? getBooksFromCache() : fetchBooks();\n  }\n\n  render() {\n    const { \n      isLoading, error, fetchBooks, getBooksFromCache, bookstoreService, \n      ...props \n    } = this.props;\n\n    if (isLoading) {\n      return <Spinner />\n    } else if (error) {\n      return <ErrorView />\n    } else {\n      return <BookList {...props} />\n    }\n  }\n}\n\n// 1.\n// const action = { type: 'UPLOAD_BOOKS', payload: newBooks };\n// const mapDispatchToProps = (dispatch) => (\n//   { uploadBooks: (newBooks) => dispatch(action) }\n// );\n\n// 2.\n// import { uploadBooks } from '../../actions';\n// const mapDispatchToProps = (dispatch) => (\n//   { uploadBooks: (newBooks) => dispatch(uploadBooks(newBooks)) }\n// );\n\n// 3.\n// import { uploadBooks } from '../../actions';\n// import { bindActionCreators } from 'redux';\n// const mapDispatchToProps = (dispatch) => bindActionCreators(\n//   { uploadBooks }, dispatch\n// );\n\n// 4.\n// const mapDispatchToProps = { uploadBooks, resetBooks, errorBooks };\n\n// 5.\n// const mapDispatchToProps = (dispatch, { bookstoreService }) => ({\n//   fetchBooks: fetchBooks(dispatch, bookstoreService),\n//   addToCart: (bookId) => dispatch(addToCart(bookId))\n// });\n\n// 6.\n// const mapDispatchToProps = (dispatch, { bookstoreService }) => ({\n//   fetchBooks: () => dispatch(fetchBooks(bookstoreService)()),\n//   addToCart: (bookId) => dispatch(addToCart(bookId))\n// });\n\n// 7.\nconst mapDispatchToProps = (dispatch, { bookstoreService }) => {\n  return bindActionCreators({\n    fetchBooks: fetchBooks(bookstoreService),\n    getBooksFromCache,\n    addBookToCart,\n    toggleFilter,\n    searchBy,\n  }, dispatch);\n};\n\nconst mapStateToProps = ({ booksState }) => ({ ...booksState });\n\nexport default composeHoc(\n  connectHoc(),\n  connect(mapStateToProps, mapDispatchToProps)\n)(BookListContainer);","import BookListContainer from './BookListContainer';\nexport default BookListContainer;\n","import React, { Fragment } from 'react';\nimport BookListContainer from '../../containers/BookListContainer';\n\nconst HomePage = () => <Fragment>\n  <BookListContainer />\n</Fragment>\n\nexport default HomePage;","import Header from './Header';\nexport default Header;","import { connect } from 'react-redux';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport './Header.css';\n\nconst Header = ({ numberItems, currency, total }) =>\n\t<div className=\"rs-header__wrapper rs-p-after border-bottom\">\n\t\t<header className=\"container\">\n\t\t\t<div className=\"row d-flex justify-content-between align-items-center\">\n\t\t\t\t<Link to=\"/red-store-build/\" className=\"rs-header__logo\">Red-Store</Link>\n\t\t\t\t<Link to=\"/red-store-build/cart\">\n\t\t\t\t\t<i className=\"fa fa-shopping-cart\" /> {numberItems} items ({currency}{total})\n\t\t\t</Link>\n\t\t\t</div>\n\t\t</header>\n\t</div>\n\nconst mapStateToProps = ({ cartState: { cartItems, currency, total } }) => ({ numberItems: cartItems.length, currency, total });\n\nexport default connect(mapStateToProps)(Header);","import App from './App';\nexport default App;","import React, { Fragment } from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport { HomePage, CartPage } from '../Pages';\nimport './App.css';\nimport Header from '../Header';\n\nconst App = () =>\n\t<Fragment>\n\t\t<Header />\n\t\t<main role=\"main\" className=\"container pb-5\">\n\t\t\t<Switch>\n\t\t\t\t{/* <Route path='/' component={HomePage} exact />\n\t\t\t\t<Route path='/cart' component={CartPage} /> */}\n\t\t\t\t<Route path='/red-store-build/' component={HomePage} exact />\n\t\t\t\t<Route path='/red-store-build/cart' component={CartPage} />\n\t\t\t</Switch>\n\t\t</main>\n\t</Fragment>\n\n\nexport default App;","export default class BookstoreService {\n\t_data = [{\n\t\tid: 0,\n\t\ttitle: 'Kobzar',\n\t\tauthor: 'Taras Hryhorovych Shevchenko',\n\t\tprice: 'invaluable',\n\t\tcurrency: '',\n\t\tquantity: 0,\n\t\tcover: '/red-store-build/kobzar-bilingva.jpg',\n\t\tisInCart: false,\n\t\trating: 5,\n\t}, {\n\t\tid: 1,\n\t\ttitle: 'The Old Man and the Sea',\n\t\tauthor: 'Ernest Hemmingway',\n\t\tprice: 4,\n\t\tcurrency: '$',\n\t\tquantity: 1,\n\t\tcover: 'https://upload.wikimedia.org/wikipedia/en/7/73/Oldmansea.jpg?20120115072708',\n\t\tisInCart: false,\n\t\trating: 3,\n\t}, {\n\t\tid: 2,\n\t\ttitle: 'Treasure Island',\n\t\tauthor: 'Robert Louis Stevenson',\n\t\tprice: 5,\n\t\tcurrency: '$',\n\t\tquantity: 0,\n\t\tcover: 'https://images-na.ssl-images-amazon.com/images/I/910CGpvNnkL.jpg',\n\t\tisInCart: false,\n\t\trating: 1,\n\t}, {\n\t\tid: 3,\n\t\ttitle: 'Robinson Crusoe',\n\t\tauthor: 'Daniel Defoe',\n\t\tprice: 2,\n\t\tcurrency: '$',\n\t\tquantity: 5,\n\t\tcover: 'https://images-na.ssl-images-amazon.com/images/I/414p0x7KV%2BL.jpg',\n\t\tisInCart: false,\n\t\trating: 5,\n\n\t}, {\n\t\tid: 4,\n\t\ttitle: 'The Sea Wolf',\n\t\tauthor: 'Jack London',\n\t\tprice: 3,\n\t\tcurrency: '$',\n\t\tquantity: 3,\n\t\tcover: 'https://kbimages1-a.akamaihd.net/602eabe2-2158-44df-ba9e-29ae8849493e/1200/1200/False/the-sea-wolf-14.jpg',\n\t\tisInCart: false,\n\t\trating: 2,\n\n\t}, {\n\t\tid: 5,\n\t\ttitle: 'Moby-Dick, or The Whale',\n\t\tauthor: 'Herman Melville',\n\t\tprice: 1,\n\t\tcurrency: '$',\n\t\tquantity: 2,\n\t\tcover: 'https://www.booklya.ua/content/upload/product/183k/183841/800x800/560616/moby-dick.jpg',\n\t\tisInCart: false,\n\t\trating: 4,\n\t}];\n\n\tgetBooks = () => new Promise((resolve, reject) => setTimeout(() => {\n\t\t// if (Math.random() > 0.9) {\n\t\tif (false) {\n\t\t\treject(new Error('Error.'));\n\n\t\t} else {\n\t\t\tresolve(this._data)\n\t\t}\n\t}, 700));\n}","import { Provider } from 'react-redux';\nimport store from './store';\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport ErrorCatcher from './components/ErrorCatcher';\nimport App from './components/App';\n\nimport { ProviderBookstoreService } from './components/BookstoreServiceContext';\nimport BookstoreService from './services/BookstoreService';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ErrorCatcher>\n        <ProviderBookstoreService value={new BookstoreService()}>\n          <Router>\n            <App />\n          </Router>\n        </ProviderBookstoreService>\n      </ErrorCatcher>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}